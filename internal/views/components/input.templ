package components

type InputProps struct {
	// common
	Name            string
	Label           string
	Type            string // defaults to "text"
	Value           string
	ValuePtr        *string
	Placeholder     string
	Description     string
	Error           string
	DisabledMessage string
	Size            string // xs sm lg xl, default: md
	Required        bool
	ReadOnly        bool
	Icon            templ.Component
	Attrs           templ.Attributes

	// text input
	MinLength     string
	MaxLength     string
	Pattern       string
	ValidatorHint string

	// integer/decimal input
	Min string
	Max string

	// decimal input
	Step string
}

templ Input(props InputProps) {
	<fieldset
		class="fieldset"
	>
		if props.Label != "" {
			<legend class="fieldset-legend">{ props.Label }</legend>
		}
		<label
			for={ props.Name }
			class={
				"input w-full validator",
				templ.KV("tooltip tooltip-top", props.DisabledMessage != ""),
				templ.KV("input-xs", props.Size == "xs"),
				templ.KV("input-sm", props.Size == "sm"),
				templ.KV("input-lg", props.Size == "lg"),
				templ.KV("opacity-90", props.ReadOnly),
			}
			if props.DisabledMessage != "" {
				data-tip={ props.DisabledMessage }
			}
		>
			if props.Icon != nil {
				@props.Icon
			}
			<input
				class={
					"w-full",
					templ.KV("opacity-60", props.ReadOnly),
				}
				name={ props.Name }
				if props.Type == "" {
					type="text"
				} else {
					type={ props.Type }
				}
				if props.Value != "" {
					value={ props.Value }
				}
				if props.ValuePtr != nil {
					value={ *props.ValuePtr }
				}
				placeholder={ props.Placeholder }
				if props.Required {
					required
				}
				if props.Pattern != "" {
					pattern={ props.Pattern }
				}
				if props.ValidatorHint != "" {
					title={ props.ValidatorHint }
				}
				if props.DisabledMessage != "" {
					disabled
				}
				if props.ReadOnly {
					readonly
				}
				{ props.Attrs... }
			/>
		</label>
		if props.Description != "" {
			<p class="label text-sm">{ props.Description }</p>
		}
		<p class="text-xs text-error max-w-xs">{ props.Error }</p>
		<p class="validator-hint hidden text-xs max-w-xs !mt-0">{ props.ValidatorHint }</p>
	</fieldset>
}
